<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>State-level Explorations</title>

<script src="site_libs/header-attrs-2.16/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    EDA
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="state_level_eda.html">State-level Explorations</a>
    </li>
    <li>
      <a href="depression_prev_EDA.html">Self-reported past depression</a>
    </li>
    <li>
      <a href="bad_mh_days_EDA.html"># of days mental health not good in the past 30 days</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Statistical Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="regression_depr.html">Regression on self-reported past depression</a>
    </li>
    <li>
      <a href="regression_mh_days.html">Regression on # of days mental health not good in the past 30 days</a>
    </li>
    <li>
      <a href="ecological.html">Ecological analysis on state-level mental health outcomes</a>
    </li>
    <li class="dropdown-header">Geographic Distribution of mental health outcomes by gender</li>
    <li>
      <a href="state_level_dashboard.html"></a>
    </li>
  </ul>
</li>
<li>
  <a href="https://ziqingwang.shinyapps.io/shiny/">Odds to Probability</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="report.html">Report</a>
</li>
<li>
  <a href="mailto:&lt;zw2899@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/ZiqingWang-00">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">State-level Explorations</h1>

</div>


<div id="state-level-gender-differences-in-mental-health-outcomes"
class="section level2">
<h2>State-level gender differences in mental health outcomes</h2>
<p>For a dash board of the geographical distribution of the two mental
health outcomes, click {here}(). Note that the data set has no data from
Florida.</p>
<div id="outcome-1-self-reported-past-depression"
class="section level3">
<h3>Outcome 1: self-reported past depression</h3>
<p>First, we look at the top 10 states with the highest/lowest estimated
% women/men self-reported past depression. We look at women first. Below
is a bar plot to visualize the 10 states with the highest estimated % of
self-reported depression among women.</p>
<pre class="r"><code>depr_prev_bystate_gender = brfss_design %&gt;%
  group_by(state_code, sex, depression) %&gt;%
  summarize(depression_prev = 100*survey_mean(na.rm = T, vartype = c(&quot;ci&quot;))) %&gt;% 
  ungroup()

sorted_depr_prev = depr_prev_bystate_gender %&gt;%
  filter(depression == &quot;yes&quot;, sex == &quot;female&quot;) %&gt;%
  arrange(desc(depression_prev)) 

sorted_depr_prev %&gt;% 
  select(state_code, depression_prev:depression_prev_upp) %&gt;% 
  slice(1:10) %&gt;% 
  ggplot(aes(x = fct_inorder(state_code), y = depression_prev)) +
  geom_bar(position=&quot;dodge&quot;, stat=&quot;identity&quot;, fill = &quot;#FF6666&quot;) +
  geom_errorbar(aes(ymin=depression_prev_low, ymax=depression_prev_upp), 
                width=.2, position=position_dodge(.9)) +
  labs(x = &quot;state&quot;, 
       y = &quot;prevalence of self-reported past depression (%)&quot;,
       title = &quot;Top 10 states with the highest estimated % of women self-reported past depression&quot;) +
  geom_text(aes(label = sprintf(&quot;%.2f&quot;, depression_prev), y = depression_prev),  vjust = 5) </code></pre>
<p><img src="state_level_eda_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>We can see that the top 10 states with the highest estimated % of
women self-reported past depression are in order, West Virginia,
Kentucky, Utah, Tennessee, Indiana, Oregon, Oklahoma, Louisiana,
Vermont, and Arkensas. According to the graph, the estimated %s of
self-reported depression among women are around 30% in all these states,
with very small differences in magnitude.</p>
<p>Below is a bar plot to visualize the 10 states with the lowest
estimated % of self-reported depression among women.</p>
<pre class="r"><code>depr_prev_bystate_gender %&gt;% 
  filter(depression == &quot;yes&quot;, sex == &quot;female&quot;) %&gt;% 
  select(state_code, depression_prev:depression_prev_upp) %&gt;% 
  slice_min(depression_prev, n = 10) %&gt;% 
  ggplot(aes(x = fct_inorder(state_code), y = depression_prev)) +
  geom_bar(position=&quot;dodge&quot;, stat=&quot;identity&quot;, fill = &quot;#69b3a2&quot;) +
  geom_errorbar(aes(ymin=depression_prev_low, ymax=depression_prev_upp), 
                width=.2, position=position_dodge(.9)) +
  labs(x = &quot;state&quot;, 
       y = &quot;prevalence of self-reported past depression (%)&quot;,
       title = &quot;Top 10 states with the lowest estimated % of women self-reported past depression&quot;) +
  geom_text(aes(label = sprintf(&quot;%.2f&quot;, depression_prev), y = depression_prev),  vjust = 5) </code></pre>
<p><img src="state_level_eda_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>We can see that the top 10 states with the lowest estimated % of
women self-reported past depression are in order, Hawaii, California,
New York, New Jersey, Delaware, Illinois, Maryland, Nevada, Georgia, and
Connecticut. Among these states, it seems like the prevalence of
self-reported depression among women in Hawaii is much lower than the
other 9 states.</p>
<p>Next, we look at the rankings for men. Below is a bar plot to
visualize the 10 states with the highest estimated % of self-reported
depression among men.</p>
<pre class="r"><code>depr_prev_bystate_gender %&gt;% 
  filter(depression == &quot;yes&quot;, sex == &quot;male&quot;) %&gt;% 
  select(state_code, depression_prev:depression_prev_upp) %&gt;% 
  slice_max(depression_prev, n = 10) %&gt;% 
  ggplot(aes(x = fct_inorder(state_code), y = depression_prev)) +
  geom_bar(position=&quot;dodge&quot;, stat=&quot;identity&quot;, fill = &quot;#FF6666&quot;) +
  geom_errorbar(aes(ymin=depression_prev_low, ymax=depression_prev_upp), 
                width=.2, position=position_dodge(.9)) +
  labs(x = &quot;state&quot;, 
       y = &quot;prevalence of self-reported past depression (%)&quot;,
       title = &quot;Top 10 states with the lowest estimated % of men self-reported past depression&quot;) +
  geom_text(aes(label = sprintf(&quot;%.2f&quot;, depression_prev), y = depression_prev),  vjust = 5) </code></pre>
<p><img src="state_level_eda_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>We can see that the top 10 states with the highest estimated % of men
who self-reported past depression are in order, Vermont, West Virginia,
Arkansas, Tennessee, Kentucky, Rhode Island, Louisiana, Oregon,
Oklahoma, and Washinton DC. According to the graph, the estimated %s of
self-reported depression among men are around 20% in all these states,
with very small differences in magnitude. All these states also have the
highest estimated % of self-reported depression among women, except for
Rhodes Island and Washinton DC. This might indicate high disparity in
mental health outcomes in the remaining 8 states.</p>
<p>Below is a bar plot to visualize the 10 states with the lowest
estimated % of self-reported depression among men.</p>
<pre class="r"><code>depr_prev_bystate_gender %&gt;% 
  filter(depression == &quot;yes&quot;, sex == &quot;male&quot;) %&gt;% 
  select(state_code, depression_prev:depression_prev_upp) %&gt;% 
  slice_min(depression_prev, n = 10) %&gt;% 
  ggplot(aes(x = fct_inorder(state_code), y = depression_prev)) +
  geom_bar(position=&quot;dodge&quot;, stat=&quot;identity&quot;, fill = &quot;#69b3a2&quot;) +
  geom_errorbar(aes(ymin=depression_prev_low, ymax=depression_prev_upp), 
                width=.2, position=position_dodge(.9)) +
  labs(x = &quot;state&quot;, 
       y = &quot;prevalence of self-reported past depression (%)&quot;,
       title = &quot;Top 10 states with the lowest estimated % of men self-reported past depression&quot;) +
  geom_text(aes(label = sprintf(&quot;%.2f&quot;, depression_prev), y = depression_prev),  vjust = 5) </code></pre>
<p><img src="state_level_eda_files/figure-html/unnamed-chunk-5-1.png" width="672" />
We can see that the top 10 states with the lowest estimated % of men who
self-reported past depression are, in order, Hawaii, South Dakota,
Maryland, Delaware, Iowa, Illinois, California, Nevada, Arizona, and
Wisconsin. Again, the difference in magnitude is small. Among these
states, South Dakota, Iowa, Nevada, Arizona, and Wisconson were not
among the top 10 states that have the lowest estimated % of
self-reported past depression among women. This observation reiterate
the possibility of larger gender gap in this mental health outcome in
certain states.</p>
<p>To present a summary for all states surveyed in the data set, we
produced a grouped barplot of the prevalence of self-reported past
diagnosis of depression by gender in each US state, arranged in
descending order by the value of this estimate among women.</p>
<pre class="r"><code>depr_prev_bystate_gender %&gt;% 
  filter(depression == &quot;yes&quot;) %&gt;%
  mutate(state_code = factor(state_code, levels = sorted_depr_prev$state_code, ordered = TRUE)) %&gt;% 
  ggplot(aes(x = state_code, y = depression_prev, fill = sex), group = state_code) +
  geom_bar(stat=&quot;identity&quot;, width=.5, position = &quot;dodge&quot;)  +
  theme(axis.text.x = element_text(angle = 90, hjust = 1),
        legend.position = &quot;bottom&quot;) +
  labs(x = &quot;state&quot;, y = &quot;prevalence (%)&quot;,
       title = &quot;Prevalence of self-reported past depression by gender in each US state&quot;)</code></pre>
<p><img src="state_level_eda_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>We can see that this prevalence among women is the highest in West
Virginia and lowest in Hawaii. Interestingly, this prevalence among men
did not show a decrease as obvious as that among women. This indicates
that the gender difference in this outcome is larger in some states than
the other. To think about this observation further, we produced below
another grouped barplot of the prevalence of self-reported past
diagnosis of depression by gender in each US state, but thus time
arranged in descending order by the difference of the value of this
estimate between men and women.</p>
<pre class="r"><code>diff_vec = depr_prev_bystate_gender %&gt;% 
  ungroup() %&gt;% 
  filter(depression == &quot;yes&quot;) %&gt;% 
  select(state_code, sex, depression_prev) %&gt;% 
  pivot_wider(names_from = sex, names_prefix = &quot;prev_&quot;, values_from = depression_prev) %&gt;% 
  mutate(prev_diff = prev_female - prev_male) %&gt;% 
  select(prev_diff)

# Extract the difference in prevalence variable
diff_vec = diff_vec[rep(seq_len(nrow(diff_vec)), each = 2), ]

depr_prev_bystate_gender %&gt;% 
  filter(depression == &quot;yes&quot;) %&gt;% 
  select(state_code, sex, depression_prev) %&gt;% 
  bind_cols(., diff_vec) %&gt;% 
  ggplot(aes(x = fct_reorder(state_code, prev_diff, .desc = T), y = depression_prev, fill = sex), group = state_code) +
  geom_bar(stat=&quot;identity&quot;, width=.5, position = &quot;dodge&quot;)  +
  theme(axis.text.x = element_text(angle = 90, hjust = 1),
        legend.position = &quot;bottom&quot;) +
  labs(x = &quot;state&quot;, y = &quot;prevalence (%)&quot;,
       title = &quot;Prevalence of self-reported past depression by gender, ordered by difference&quot;)</code></pre>
<p><img src="state_level_eda_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>We can see that the 10 states that have the largest difference of the
estimated % of self-reported past depression are, in order, Kentucky,
Indiana, Wisconsin, Utah, West Virginia, Montana, Oregon, North Dakota,
Oklahoma, and Tennessee. Among these 10 states, Kentucky, Indiana, Utah,
West Virginia, Oregan, Oklahoma, and Tennessee are also in the top 10
states that have the highest estimated % of self-reported past
depression among women, suggesting these states not only have overall
high past depression prevalence but also high gender disparity in past
depression prevalence.</p>
</div>
<div
id="outcome-2-more-than-15-days-mental-health-not-good-in-the-past-30-days"
class="section level3">
<h3>Outcome 2: More than 15 days mental health not good in the past 30
days</h3>
<p>We repeat the same exploratory analyses as above, but this time for
the other mental health outcome, which is the % of respondents who
self-reported more than 15 days mental health not good in the past 30
days. We start with the state rankings again.</p>
<pre class="r"><code>badmh_prev_bystate_gender = brfss_design %&gt;%
  group_by(state_code, sex, mh_bin) %&gt;%
  summarize(badmh_prev = 100*survey_mean(na.rm = T, vartype = c(&quot;ci&quot;))) %&gt;% 
  ungroup()

badmh_prev_bystate_gender %&gt;% 
  filter(mh_bin == &quot;&gt;15 days&quot;, sex == &quot;female&quot;) %&gt;% 
  select(state_code, badmh_prev:badmh_prev_upp) %&gt;% 
  slice_max(badmh_prev, n = 10) %&gt;% 
  ggplot(aes(x = fct_inorder(state_code), y = badmh_prev)) +
  geom_bar(position=&quot;dodge&quot;, stat=&quot;identity&quot;, fill = &quot;#FF6666&quot;) +
  geom_errorbar(aes(ymin=badmh_prev_low, ymax=badmh_prev_upp), 
                width=.2, position=position_dodge(.9)) +
  labs(x = &quot;state&quot;, 
       y = &quot;% &gt;15 day of bad mental health in the past 30 days&quot;,
       title = &quot;Top 10 states with the highest estimated % \n of women with &gt;15 days of bad mental health in the past 30 days&quot;) +
  geom_text(aes(label = sprintf(&quot;%.2f&quot;, badmh_prev), y = badmh_prev),  vjust = 5) </code></pre>
<p><img src="state_level_eda_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>We can see that the top 10 states with the highest estimated % of
women self-reported more than 15 days of bad mental health in the past
30 days are in order, West Virginia, Alabama, Oklahoma, Kentucky,
Arkansas, Tennessee, Louisiana, Utah, Nevada, and Ohio. According to the
graph, the estimated %’s of self-reported &gt;15 days where mental
health is not good among women are around 15% in all these states, with
small differences in magnitude.</p>
<p>Below is a bar plot to visualize the 10 states with the lowest
estimated % of women who self-reported &gt;15 days where mental health
is not good in the past 30 days.</p>
<pre class="r"><code>badmh_prev_bystate_gender %&gt;% 
  filter(mh_bin == &quot;&gt;15 days&quot;, sex == &quot;female&quot;) %&gt;% 
  select(state_code, badmh_prev:badmh_prev_upp) %&gt;% 
  slice_min(badmh_prev, n = 10) %&gt;% 
  ggplot(aes(x = fct_inorder(state_code), y = badmh_prev)) +
  geom_bar(position=&quot;dodge&quot;, stat=&quot;identity&quot;, fill = &quot;#69b3a2&quot;) +
  geom_errorbar(aes(ymin=badmh_prev_low, ymax=badmh_prev_upp), 
                width=.2, position=position_dodge(.9)) +
  labs(x = &quot;state&quot;, 
       y = &quot;% self-reported &gt;15 day of bad mental health in the past 30 days&quot;,
       title = &quot;Top 10 states with the lowest estimated % \n of women with &gt;15 days of bad mental health in the past 30 days&quot;) +
  geom_text(aes(label = sprintf(&quot;%.2f&quot;, badmh_prev), y = badmh_prev),  vjust = 5) </code></pre>
<p><img src="state_level_eda_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>We can see that the top 10 states with the lowest estimated % of
women self-reported &gt; 15 days mental health not good in the past 30
days are in order, Hawaii, South Dakota, Washington DC, Minnesota,
Alaska, New York, North Dakota, Nebraska, New Jersey, and Maryland. The
differences in magnitude of this mental health outcome are small among
these states.</p>
<p>Next, we look at the rankings for men. Below is a bar plot to
visualize the 10 states with the highest estimated % of self-reported
&gt;15 days mental health not good in the past 30 days among men.</p>
<pre class="r"><code>badmh_prev_bystate_gender %&gt;% 
  filter(mh_bin == &quot;&gt;15 days&quot;, sex == &quot;male&quot;) %&gt;% 
  select(state_code, badmh_prev:badmh_prev_upp) %&gt;% 
  slice_max(badmh_prev, n = 10) %&gt;% 
  ggplot(aes(x = fct_inorder(state_code), y = badmh_prev)) +
  geom_bar(position=&quot;dodge&quot;, stat=&quot;identity&quot;, fill = &quot;#FF6666&quot;) +
  geom_errorbar(aes(ymin=badmh_prev_low, ymax=badmh_prev_upp), 
                width=.2, position=position_dodge(.9)) +
  labs(x = &quot;state&quot;, 
       y = &quot;% self-reported &gt;15 day of bad mental health in the past 30 days&quot;,
       title = &quot;Top 10 states with the highest estimated % \n of men with &gt;15 days of bad mental health in the past 30 days&quot;) +
  geom_text(aes(label = sprintf(&quot;%.2f&quot;, badmh_prev), y = badmh_prev),  vjust = 5) </code></pre>
<p><img src="state_level_eda_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>We can see that the top 10 states with the highest estimated % of men
who self-reported past depression are in order, Arkansas, Tennessee,
West Virginia, Nevaa, Kentucky, South Carolina, Alabama, Vermont,
Oklahoma, and Louisianna. According to the graph, the estimated %’s of
self-reported &gt;15 days mental health not good in the past 30 days
among men are around 10% in all these states, which is closee in value
to the 10 lowest %’s of this mental health outcome among women, as we
saw above. It is also worth noting that these states overlap with the
top 10 states where most %’s of women reporting &gt;15 days mental
health not good in the past 30 days, except for Rhodes Island and
Washington DC. This indicates that the 8 overlapping states probably
have the highest %’s of people reporting more than half of the past 30
days mental health not good.</p>
<p>Below is a bar plot to visualize the 10 states with the lowest
estimated % of self-reported &gt;15 days mental health not good among
men.</p>
<pre class="r"><code>badmh_prev_bystate_gender %&gt;% 
  filter(mh_bin == &quot;&gt;15 days&quot;, sex == &quot;male&quot;) %&gt;% 
  select(state_code, badmh_prev:badmh_prev_upp) %&gt;% 
  slice_min(badmh_prev, n = 10) %&gt;% 
  ggplot(aes(x = fct_inorder(state_code), y = badmh_prev)) +
  geom_bar(position=&quot;dodge&quot;, stat=&quot;identity&quot;, fill = &quot;#69b3a2&quot;) +
  geom_errorbar(aes(ymin=badmh_prev_low, ymax=badmh_prev_upp), 
                width=.2, position=position_dodge(.9)) +
  labs(x = &quot;state&quot;, 
       y = &quot;% &gt;15 days mental health not good in the past 30 days&quot;,
       title = &quot;Top 10 states with the lowest estimated % of men \n self-reported &gt;15 days mental health not good in the past 30 days&quot;) +
  geom_text(aes(label = sprintf(&quot;%.2f&quot;, badmh_prev), y = badmh_prev),  vjust = 5) </code></pre>
<p><img src="state_level_eda_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>We can see that the differences in the outcome among the 10 states
above are not very different.</p>
<p>To present a summary for all states surveyed in the data set, we
produced a grouped barplot of the prevalence of self-reported &gt;15
days mental health not good in the past 30 days by gender in each US
state, arranged in descending order by the value of this estimate among
women.</p>
<pre class="r"><code>sorted_badmh_prev = badmh_prev_bystate_gender %&gt;%
  filter(mh_bin == &quot;&gt;15 days&quot;, sex == &quot;female&quot;) %&gt;%
  arrange(desc(badmh_prev)) 

badmh_prev_bystate_gender %&gt;% 
  filter(mh_bin == &quot;&gt;15 days&quot;) %&gt;%
  ggplot(aes(x = factor(state_code, levels = sorted_badmh_prev$state_code, ordered = TRUE), y = badmh_prev, fill = sex), group = state_code) +
  geom_bar(stat=&quot;identity&quot;, width=.5, position = &quot;dodge&quot;)  +
  theme(axis.text.x = element_text(angle = 90, hjust = 1),
        legend.position = &quot;bottom&quot;) +
  labs(x = &quot;state&quot;, y = &quot;prevalence (%)&quot;,
       title = &quot;% &gt;15 day of bad mental health in the past 30 days, by gender&quot;)</code></pre>
<p><img src="state_level_eda_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>Again, we can see that this % among women is the highest in West
Virginia and lowest in Hawaii. Again, this % among men did not show a
decrease as obvious as that among women. This shows that in states where
women are “happier” (indicated by fewer days mental health is not good
in the past month), men are not more likely to be be “happier” as well.
This also suggests that the gender difference in this outcome is larger
in some states than the other. To think about this observation further,
we produced below another grouped barplot of the prevalence of
self-reported &gt;15 days mental health not good by gender in each US
state, but this time arranged in descending order by the difference in %
reporting &gt;15 days mental health not good in the past 30 days between
men and women.</p>
<pre class="r"><code>diff_vec_badmh = badmh_prev_bystate_gender %&gt;% 
  filter(mh_bin == &quot;&gt;15 days&quot;) %&gt;% 
  select(state_code, sex, badmh_prev) %&gt;% 
  pivot_wider(names_from = sex, names_prefix = &quot;prev_&quot;, values_from = badmh_prev) %&gt;% 
  mutate(prev_diff = prev_female - prev_male) %&gt;% 
  select(prev_diff)

# Extract the difference in prevalence variable
diff_vec_badmh = diff_vec_badmh[rep(seq_len(nrow(diff_vec_badmh)), each = 2), ]

badmh_prev_bystate_gender %&gt;% 
  filter(mh_bin == &quot;&gt;15 days&quot;) %&gt;% 
  select(state_code, sex, badmh_prev) %&gt;% 
  bind_cols(., diff_vec_badmh) %&gt;% 
  ggplot(aes(x = fct_reorder(state_code, prev_diff, .desc = T), y = badmh_prev, fill = sex), group = state_code) +
  geom_bar(stat=&quot;identity&quot;, width=.5, position = &quot;dodge&quot;)  +
  theme(axis.text.x = element_text(angle = 90, hjust = 1),
        legend.position = &quot;bottom&quot;) +
  labs(x = &quot;state&quot;, y = &quot;prevalence (%)&quot;,
       title = &quot;%&gt;15 days of bad mental health in the past 30 days \n ordered by difference between gender&quot;)</code></pre>
<p><img src="state_level_eda_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>We can see that the 10 states that have the largest difference of the
estimated % of self-reported &gt;15 days mental health not good in the
past 30 days are, in order, Oklahoma, West Virginia, Alabama, Wyoming,
Indiana, Utah, Iowa, Wisconsin, Virginia, and Kentucky. Among these 10
states, West Virginia, Alabama, Kentucky, and Utah are alse among the
top 10 states where highest % of women reported &gt;15 days mental
health not good in the past 30 days.</p>
<p>Finally, for each comparison, we make a table that shows side by side
the top 10 states with the highest prevalence of self-reported past
depression among women, self-reported &gt;15 days mental health not good
among women, and the largest difference in these two mental health
outcomes by gender.</p>
<pre class="r"><code>top_10_depr_prev = depr_prev_bystate_gender %&gt;% 
  ungroup() %&gt;% 
  filter(depression == &quot;yes&quot;, sex == &quot;female&quot;) %&gt;% 
  slice_max(depression_prev, n=10) %&gt;% 
  select(state_code) 

top_10_depr_diff = depr_prev_bystate_gender %&gt;% 
  ungroup() %&gt;% 
  filter(depression == &quot;yes&quot;) %&gt;% 
  select(state_code, sex, depression_prev) %&gt;% 
  bind_cols(., diff_vec) %&gt;% 
  slice_max(prev_diff, n = 20) %&gt;% 
  filter(sex == &quot;female&quot;) %&gt;% 
  select(state_code)

top_10_badmh_prev = badmh_prev_bystate_gender %&gt;% 
  filter(mh_bin == &quot;&gt;15 days&quot;, sex == &quot;female&quot;) %&gt;% 
  slice_max(badmh_prev, n=10) %&gt;% 
  select(state_code) 

top_10_badmh_diff = badmh_prev_bystate_gender %&gt;% 
  filter(mh_bin == &quot;&gt;15 days&quot;) %&gt;% 
  select(state_code, sex, badmh_prev) %&gt;% 
  bind_cols(., diff_vec_badmh) %&gt;% 
  slice_max(prev_diff, n = 20) %&gt;% 
  filter(sex == &quot;female&quot;) %&gt;% 
  select(state_code)


#tibble(`% past depression` = top_10_depr_prev, 
#       `difference in % past depression` = top_10_depr_diff,
#       `% bad mental health` = top_10_badmh_prev,
#       `difference in % bad mental health` = top_10_badmh_diff)

ranking_table = cbind(top_10_depr_prev, 
      top_10_depr_diff, 
      top_10_badmh_prev, 
      top_10_badmh_diff) 

colnames(ranking_table) = c(&quot;% past depression&quot;, &quot;difference in % past depression&quot;, 
                            &quot;% bad mental health&quot;, &quot;difference in % bad mental health &quot;)

ranking_table %&gt;%  knitr::kable()</code></pre>
<table>
<colgroup>
<col width="17%" />
<col width="30%" />
<col width="19%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">% past depression</th>
<th align="left">difference in % past depression</th>
<th align="left">% bad mental health</th>
<th align="left">difference in % bad mental health</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">WV</td>
<td align="left">KY</td>
<td align="left">WV</td>
<td align="left">OK</td>
</tr>
<tr class="even">
<td align="left">KY</td>
<td align="left">IN</td>
<td align="left">AL</td>
<td align="left">WV</td>
</tr>
<tr class="odd">
<td align="left">UT</td>
<td align="left">WI</td>
<td align="left">OK</td>
<td align="left">AL</td>
</tr>
<tr class="even">
<td align="left">TN</td>
<td align="left">UT</td>
<td align="left">KY</td>
<td align="left">WY</td>
</tr>
<tr class="odd">
<td align="left">IN</td>
<td align="left">WV</td>
<td align="left">AR</td>
<td align="left">IN</td>
</tr>
<tr class="even">
<td align="left">OR</td>
<td align="left">MT</td>
<td align="left">TN</td>
<td align="left">UT</td>
</tr>
<tr class="odd">
<td align="left">OK</td>
<td align="left">OR</td>
<td align="left">LA</td>
<td align="left">IA</td>
</tr>
<tr class="even">
<td align="left">LA</td>
<td align="left">ND</td>
<td align="left">UT</td>
<td align="left">WI</td>
</tr>
<tr class="odd">
<td align="left">VT</td>
<td align="left">OK</td>
<td align="left">NV</td>
<td align="left">VA</td>
</tr>
<tr class="even">
<td align="left">AR</td>
<td align="left">TN</td>
<td align="left">OH</td>
<td align="left">KY</td>
</tr>
</tbody>
</table>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
